<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ASD 干预系统 - 服务测试导航</title>
    <link rel="stylesheet" href="common/styles.css">
    <style>
        .service-section {
            margin-bottom: 40px;
        }

        .section-title {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 20px;
            color: #222;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .service-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 15px;
        }

        .service-card {
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 20px;
            transition: all 0.2s;
            cursor: pointer;
        }

        .service-card:hover {
            border-color: #0066cc;
            box-shadow: 0 2px 8px rgba(0, 102, 204, 0.1);
            transform: translateY(-2px);
        }

        .service-card-title {
            font-size: 16px;
            font-weight: 600;
            color: #222;
            margin-bottom: 8px;
        }

        .service-card-desc {
            font-size: 13px;
            color: #666;
            line-height: 1.5;
        }

        .service-card-meta {
            margin-top: 12px;
            padding-top: 12px;
            border-top: 1px solid #f0f0f0;
            font-size: 12px;
            color: #999;
        }

        .stats {
            display: flex;
            gap: 30px;
            margin-bottom: 30px;
        }

        .stat-item {
            flex: 1;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .stat-number {
            font-size: 32px;
            font-weight: 600;
            color: #0066cc;
        }

        .stat-label {
            font-size: 14px;
            color: #666;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="container">
            <h1>ASD 地板时光干预辅助系统</h1>
            <div class="subtitle">服务测试导航 - 开发调试工具</div>
        </div>
    </div>

    <div class="container">
        <!-- 统计信息 -->
        <div class="stats">
            <div class="stat-item">
                <div class="stat-number">17</div>
                <div class="stat-label">总服务数</div>
            </div>
            <div class="stat-item">
                <div class="stat-number">7</div>
                <div class="stat-label">基础设施服务</div>
            </div>
            <div class="stat-item">
                <div class="stat-number">10</div>
                <div class="stat-label">业务逻辑服务</div>
            </div>
        </div>

        <!-- 基础设施层服务 -->
        <div class="service-section">
            <div class="section-title">
                <span class="badge badge-infrastructure">基础设施层</span>
                <span>Infrastructure Services (模块 1-7)</span>
            </div>
            <div class="service-grid">
                <div class="service-card" onclick="location.href='infrastructure/sqlite.html'">
                    <div class="service-card-title">📊 SQLite 数据管理</div>
                    <div class="service-card-desc">孩子档案、会话记录、周计划、观察记录的持久化存储</div>
                    <div class="service-card-meta">模块 1 | 8 个接口</div>
                </div>

                <div class="service-card" onclick="location.href='infrastructure/graphiti.html'">
                    <div class="service-card-title">🧠 Graphiti 记忆网络</div>
                    <div class="service-card-desc">长期记忆存储、趋势分析、里程碑检测、平台期识别</div>
                    <div class="service-card-meta">模块 2 | 6 个接口</div>
                </div>

                <div class="service-card" onclick="location.href='infrastructure/rag.html'">
                    <div class="service-card-title">📚 知识库与 RAG</div>
                    <div class="service-card-desc">方法论检索、游戏推荐、量表查询、案例参考</div>
                    <div class="service-card-meta">模块 3 | 7 个接口</div>
                </div>

                <div class="service-card" onclick="location.href='infrastructure/video-analysis.html'">
                    <div class="service-card-title">🎥 AI 视频解析</div>
                    <div class="service-card-desc">视频分析、关键片段提取、行为识别</div>
                    <div class="service-card-meta">模块 4 | 2 个接口</div>
                </div>

                <div class="service-card" onclick="location.href='infrastructure/speech.html'">
                    <div class="service-card-title">🎤 语音处理</div>
                    <div class="service-card-desc">语音转文字（ASR）、文字转语音（TTS）</div>
                    <div class="service-card-meta">模块 5 | 2 个接口</div>
                </div>

                <div class="service-card" onclick="location.href='infrastructure/document-parser.html'">
                    <div class="service-card-title">📄 文档解析</div>
                    <div class="service-card-desc">医院报告解析、量表数据解析</div>
                    <div class="service-card-meta">模块 6 | 2 个接口</div>
                </div>

                <div class="service-card" onclick="location.href='infrastructure/file-upload.html'">
                    <div class="service-card-title">📤 文件上传</div>
                    <div class="service-card-desc">上传文件到服务器本地，获取文件路径</div>
                    <div class="service-card-meta">模块 7 | 1 个接口</div>
                </div>
            </div>
        </div>

        <!-- 业务逻辑层服务 -->
        <div class="service-section">
            <div class="section-title">
                <span class="badge badge-business">业务逻辑层</span>
                <span>Business Services (模块 8-17)</span>
            </div>
            <div class="service-grid">
                <div class="service-card" onclick="location.href='business/assessment.html'">
                    <div class="service-card-title">📋 初始评估</div>
                    <div class="service-card-desc">构建孩子画像、创建观察框架</div>
                    <div class="service-card-meta">模块 7 | 2 个接口</div>
                </div>

                <div class="service-card" onclick="location.href='business/weekly-plan.html'">
                    <div class="service-card-title">📅 周计划推荐</div>
                    <div class="service-card-desc">生成周计划、计算优先维度</div>
                    <div class="service-card-meta">模块 8 | 2 个接口</div>
                </div>

                <div class="service-card" onclick="location.href='business/guidance.html'">
                    <div class="service-card-title">🧭 实时指引</div>
                    <div class="service-card-desc">步骤指引、话术推荐</div>
                    <div class="service-card-meta">模块 9 | 2 个接口</div>
                </div>

                <div class="service-card" onclick="location.href='business/observation.html'">
                    <div class="service-card-title">👁️ 观察捕获</div>
                    <div class="service-card-desc">快捷观察、语音观察、结构化处理</div>
                    <div class="service-card-meta">模块 10 | 3 个接口</div>
                </div>

                <div class="service-card" onclick="location.href='business/video-validation.html'">
                    <div class="service-card-title">✅ 视频分析与验证</div>
                    <div class="service-card-desc">视频分析、交叉验证</div>
                    <div class="service-card-meta">模块 11 | 2 个接口</div>
                </div>

                <div class="service-card" onclick="location.href='business/summary.html'">
                    <div class="service-card-title">📝 总结生成</div>
                    <div class="service-card-desc">初步总结、反馈表、最终总结</div>
                    <div class="service-card-meta">模块 12 | 3 个接口</div>
                </div>

                <div class="service-card" onclick="location.href='business/memory-update.html'">
                    <div class="service-card-title">🔄 记忆更新</div>
                    <div class="service-card-desc">更新记忆网络、刷新上下文</div>
                    <div class="service-card-meta">模块 13 | 2 个接口</div>
                </div>

                <div class="service-card" onclick="location.href='business/reassessment.html'">
                    <div class="service-card-title">🔍 再评估</div>
                    <div class="service-card-desc">重新评估、更新画像、检查调整</div>
                    <div class="service-card-meta">模块 14 | 3 个接口</div>
                </div>

                <div class="service-card" onclick="location.href='business/chat-assistant.html'">
                    <div class="service-card-title">💬 对话助手</div>
                    <div class="service-card-desc">智能对话、查询路由</div>
                    <div class="service-card-meta">模块 15 | 2 个接口</div>
                </div>

                <div class="service-card" onclick="location.href='business/visualization.html'">
                    <div class="service-card-title">📊 可视化与报告</div>
                    <div class="service-card-desc">雷达图、时间线、趋势图、报告生成</div>
                    <div class="service-card-meta">模块 16 | 5 个接口</div>
                </div>
            </div>
        </div>

        <!-- 其他工具 -->
        <div class="service-section">
            <div class="section-title">
                <span>🔧 其他工具</span>
            </div>
            <div class="service-grid">
                <div class="service-card" onclick="window.open('http://localhost:8000/docs', '_blank')">
                    <div class="service-card-title">📖 API 文档</div>
                    <div class="service-card-desc">FastAPI 自动生成的 Swagger UI 文档</div>
                    <div class="service-card-meta">自动生成 | OpenAPI</div>
                </div>

                <div class="service-card" onclick="window.open('http://localhost:8000/health', '_blank')">
                    <div class="service-card-title">💚 健康检查</div>
                    <div class="service-card-desc">检查 API 服务运行状态</div>
                    <div class="service-card-meta">系统监控</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 检查 API 连接状态
        async function checkAPIStatus() {
            try {
                const response = await fetch('http://localhost:8000/health');
                if (response.ok) {
                    console.log('✅ API 服务运行正常');
                }
            } catch (error) {
                console.warn('⚠️ 无法连接到 API 服务，请确保后端已启动');
            }
        }

        checkAPIStatus();
    </script>
</body>
</html>
