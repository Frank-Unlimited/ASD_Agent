# ========================================
# GraphRAG 配置文件 - ASD Agent 游戏库
# ========================================

# 模型配置
models:
  # LLM 模型 - DeepSeek
  default_chat_model:
    type: openai_chat
    api_base: https://api.deepseek.com
    api_key: sk-961bfc7850d247ce916935cd0cb44822
    model: deepseek-chat
    encoding_model: cl100k_base
    max_tokens: 4096
    temperature: 0
    request_timeout: 180
    
  # Embedding 模型 - 通义千问
  default_embedding_model:
    type: openai_embedding
    api_base: https://dashscope.aliyuncs.com/compatible-mode/v1
    api_key: sk-5cd70747046b4cf787793bb6ee28cb44
    model: text-embedding-v3
    encoding_model: cl100k_base
    request_timeout: 60

# 输入配置
input:
  type: file
  file_type: text
  base_dir: input
  file_pattern: ".*.txt"
  file_encoding: utf-8

# 输出配置
output:
  type: file
  base_dir: output

# 缓存配置
cache:
  type: file
  base_dir: cache

# 向量存储配置
embeddings:
  vector_store:
    type: lancedb
    db_uri: output/lancedb
    overwrite: true

# 分块配置
chunks:
  size: 1200
  overlap: 100
  group_by_columns:
    - id

# 实体提取配置
entity_extraction:
  max_gleanings: 1
  prompt: null

# 社区报告配置  
community_reports:
  max_length: 2000
  max_input_length: 8000

# 聚类配置
cluster_graph:
  max_cluster_size: 10

# 本地搜索配置
local_search:
  text_unit_prop: 0.5
  community_prop: 0.1
  conversation_history_max_turns: 5
  top_k_entities: 10
  top_k_relationships: 10
  max_tokens: 12000

# 全局搜索配置
global_search:
  max_tokens: 12000
  data_max_tokens: 12000
  map_max_tokens: 1000
  reduce_max_tokens: 2000
  concurrency: 32
